<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content><meta name=description content="Calvin is a transactional scheduling and data replication layer that runs alongside non-transactional storage systems. It uses a deterministic locking protocol (DPL) which eliminates the need of distributed commit protocols (e.g. 2PC), it also uses a shared nothing architecture. The model it uses is a deterministic database, which works by knowing the exact read and write sets (which keys are going to be accessed) before starting the transaction. Then if we know what replicas a transaction will touch, the individual operations can be sent to the replica individually and be serialized that way."><meta name=keywords content><meta name=robots content="noodp"><meta name=theme-color content><link rel=canonical href=https://nicktehrany.github.io/notes/in4331-web-scale-data-management/deterministic-dbs/><title>Deterministic DBs :: Nick Tehrany</title><link href=https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css rel=stylesheet type=text/css><link rel=stylesheet href=/main.d7bdd8ee18bfbf4c605488a7e5b1b92cd980dfeed2bdaeab4dd5e931a7a78bc0.css><meta itemprop=name content="Deterministic DBs"><meta itemprop=description content="Calvin is a transactional scheduling and data replication layer that runs alongside non-transactional storage systems. It uses a deterministic locking protocol (DPL) which eliminates the need of distributed commit protocols (e.g. 2PC), it also uses a shared nothing architecture. The model it uses is a deterministic database, which works by knowing the exact read and write sets (which keys are going to be accessed) before starting the transaction. Then if we know what replicas a transaction will touch, the individual operations can be sent to the replica individually and be serialized that way."><meta itemprop=datePublished content="2021-06-21T13:25:36+02:00"><meta itemprop=dateModified content="2021-06-21T13:25:36+02:00"><meta itemprop=wordCount content="177"><meta itemprop=image content="https://nicktehrany.github.io"><meta itemprop=keywords content><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://nicktehrany.github.io"><meta name=twitter:title content="Deterministic DBs"><meta name=twitter:description content="Calvin is a transactional scheduling and data replication layer that runs alongside non-transactional storage systems. It uses a deterministic locking protocol (DPL) which eliminates the need of distributed commit protocols (e.g. 2PC), it also uses a shared nothing architecture. The model it uses is a deterministic database, which works by knowing the exact read and write sets (which keys are going to be accessed) before starting the transaction. Then if we know what replicas a transaction will touch, the individual operations can be sent to the replica individually and be serialized that way."><meta property="og:title" content="Deterministic DBs"><meta property="og:description" content="Calvin is a transactional scheduling and data replication layer that runs alongside non-transactional storage systems. It uses a deterministic locking protocol (DPL) which eliminates the need of distributed commit protocols (e.g. 2PC), it also uses a shared nothing architecture. The model it uses is a deterministic database, which works by knowing the exact read and write sets (which keys are going to be accessed) before starting the transaction. Then if we know what replicas a transaction will touch, the individual operations can be sent to the replica individually and be serialized that way."><meta property="og:type" content="article"><meta property="og:url" content="https://nicktehrany.github.io/notes/in4331-web-scale-data-management/deterministic-dbs/"><meta property="og:image" content="https://nicktehrany.github.io"><meta property="article:published_time" content="2021-06-21T13:25:36+02:00"><meta property="article:modified_time" content="2021-06-21T13:25:36+02:00"><meta property="og:site_name" content="Nick Tehrany"><meta property="article:published_time" content="2021-06-21 13:25:36 +0200 +0200"></head><body><div class=container><header class=header><span class=header__inner><a href=/ style=text-decoration:none><div class=logo><span class=logo__mark>$</span>
<span class=logo__text>cd nicktehrany</span>
<span class=logo__cursor></span></div></a><span class=header__right><nav class=menu><ul class=menu__inner><li><a href=/posts>Posts</a></li><li><a href=/projects>Projects</a></li><li><a href=/publications>Publications</a></li><li><a href=/notes>Uni Notes</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span></span></span></header><div class=content><main class=posts><div class=post-info><p></p></div><article><h1 class=post-title><a href=https://nicktehrany.github.io/notes/in4331-web-scale-data-management/deterministic-dbs/>Deterministic DBs</a></h1><div class=post-content><p>Calvin is a transactional scheduling and data replication layer that runs alongside non-transactional storage systems.
It uses a deterministic locking protocol (DPL) which eliminates the need of distributed commit protocols (e.g. 2PC), it
also uses a shared nothing architecture. The model it uses is a deterministic database, which works by knowing the exact
read and write sets (which keys are going to be accessed) before starting the transaction. Then if we know what replicas
a transaction will touch, the individual operations can be sent to the replica individually and be serialized that way.
Therefore, clients will contact a sequencer which will create the order of operations for the transactions. If there are
multiple sequencers, the sequencers will individually use Paxos to decide on the order (if clients send requests to two
different sequencers for example), and sequencers in Calvin will talk to the scheduler every 10ms to schedule a batch of
operations. The order of operations is created by the sequencer, it will pass this to the scheduler, which then applies
the schedule for the actual locking.</p><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']],displayMath:[['$$','$$'],['\\[','\\]']],processEscapes:true,processEnvironments:true},options:{skipHtmlTags:['script','noscript','style','textarea','pre']}};window.addEventListener('load',(event)=>{document.querySelectorAll("mjx-container").forEach(function(x){x.parentElement.classList+='has-jax'})});</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></div></article><hr><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>177 Words</p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>2021-06-21</p></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button next"><a href=https://nicktehrany.github.io/notes/in4331-web-scale-data-management/googlespanner/><span class=button__text>Google Spanner: Google's Globally Distributed Database</span>
<span class=button__icon>â†’</span></a></span></div></div></main></div><footer class=footer><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css><div><div>&nbsp; <a href=https://github.com/nicktehrany target=_blank rel=noopener title=Github><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a>&nbsp;&nbsp; <a href=https://www.linkedin.com/in/nicktehrany/ target=_blank rel=noopener title=Linkedin><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></a>&nbsp;
<a href=/misc/cv.pdf target=_self><i class="ai ai-cv ai-2x"></i></a></div></div><div class=footer__inner><div class=footer__content><span>Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>Themed by <a href=https://github.com/rhazdon/hugo-theme-hello-friend-ng>Hello Friend NG</a></span></div></div></footer></div><script type=text/javascript src=/bundle.min.af435e44374f1e99a669ea8cd5bb9a2fceed80588941a451bfddb66b86a67c9f40b0f417e9543a763f809aa7e9300d7b1d69bf99615810ba02ac70396d50fad5.js integrity="sha512-r0NeRDdPHpmmaeqM1buaL87tgFiJQaRRv922a4amfJ9AsPQX6VQ6dj+AmqfpMA17HWm/mWFYELoCrHA5bVD61Q=="></script></body></html>