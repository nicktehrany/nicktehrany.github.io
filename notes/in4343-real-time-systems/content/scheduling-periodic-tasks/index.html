<!doctype html><html lang=en>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="ie=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=author content>
<meta name=description content="Concepts Again, tasks are defined with $\Gamma={T_1,T_2,&amp;hellip;,T_n}$ and each task has a $C_I$ worst-case computation time, $T_i$ activation period, $D_i$ relative deadline, and $\Phi_i$ initial arrival time (phase).
Hyperperiod This depicts the minimum time period after which the schedule repeats. Therefore, it is the least common multiple of the periods of all the tasks.
Schedulability Feasibility is defined similar to aperiodic tasks, however each task is required to be able to be executed for its defined $C_i$ time in every interval $[a_{ik},d_{ik}],k=1,2,&amp;hellip;$.">
<meta name=keywords content>
<meta name=robots content="noodp">
<meta name=theme-color content>
<link rel=canonical href=https://nicktehrany.github.io/notes/in4343-real-time-systems/content/scheduling-periodic-tasks/>
<title>
Scheduling Periodic Tasks
</title>
<link href=https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css rel=stylesheet type=text/css>
<link rel=stylesheet href=/main.89fa80e2143f71bd5c96a7c94e531dec3276a367e22f87e74a76026ab64680bf.css>
<meta itemprop=name content="Scheduling Periodic Tasks">
<meta itemprop=description content="Concepts Again, tasks are defined with $\Gamma={T_1,T_2,&mldr;,T_n}$ and each task has a $C_I$ worst-case computation time, $T_i$ activation period, $D_i$ relative deadline, and $\Phi_i$ initial arrival time (phase).
Hyperperiod This depicts the minimum time period after which the schedule repeats. Therefore, it is the least common multiple of the periods of all the tasks.
Schedulability Feasibility is defined similar to aperiodic tasks, however each task is required to be able to be executed for its defined $C_i$ time in every interval $[a_{ik},d_{ik}],k=1,2,&mldr;$."><meta itemprop=datePublished content="2022-02-22T13:49:26+01:00">
<meta itemprop=dateModified content="2022-02-22T13:49:26+01:00">
<meta itemprop=wordCount content="1103"><meta itemprop=image content="https://nicktehrany.github.io">
<meta itemprop=keywords content>
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://nicktehrany.github.io">
<meta name=twitter:title content="Scheduling Periodic Tasks">
<meta name=twitter:description content="Concepts Again, tasks are defined with $\Gamma={T_1,T_2,&mldr;,T_n}$ and each task has a $C_I$ worst-case computation time, $T_i$ activation period, $D_i$ relative deadline, and $\Phi_i$ initial arrival time (phase).
Hyperperiod This depicts the minimum time period after which the schedule repeats. Therefore, it is the least common multiple of the periods of all the tasks.
Schedulability Feasibility is defined similar to aperiodic tasks, however each task is required to be able to be executed for its defined $C_i$ time in every interval $[a_{ik},d_{ik}],k=1,2,&mldr;$.">
<meta property="og:title" content="Scheduling Periodic Tasks">
<meta property="og:description" content="Concepts Again, tasks are defined with $\Gamma={T_1,T_2,&mldr;,T_n}$ and each task has a $C_I$ worst-case computation time, $T_i$ activation period, $D_i$ relative deadline, and $\Phi_i$ initial arrival time (phase).
Hyperperiod This depicts the minimum time period after which the schedule repeats. Therefore, it is the least common multiple of the periods of all the tasks.
Schedulability Feasibility is defined similar to aperiodic tasks, however each task is required to be able to be executed for its defined $C_i$ time in every interval $[a_{ik},d_{ik}],k=1,2,&mldr;$.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://nicktehrany.github.io/notes/in4343-real-time-systems/content/scheduling-periodic-tasks/"><meta property="og:image" content="https://nicktehrany.github.io"><meta property="article:section" content="notes">
<meta property="article:published_time" content="2022-02-22T13:49:26+01:00">
<meta property="article:modified_time" content="2022-02-22T13:49:26+01:00"><meta property="og:site_name" content="Nick Tehrany">
<meta property="article:published_time" content="2022-02-22 13:49:26 +0100 +0100">
</head>
<body class=dark-theme>
<div class=container>
<header class=header>
<span class=header__inner>
<a href=/ style=text-decoration:none>
<div class=logo>
<span class=logo__mark>$</span>
<span class=logo__text>cd nicktehrany</span>
<span class=logo__cursor>
</span>
</div>
</a>
<span class=header__right>
<nav class=menu>
<ul class=menu__inner><li><a href=/awards>Awards</a></li><li><a href=/publications>Publications</a></li><li><a href=/projects>Projects</a></li><li><a href=/notes>Uni Notes</a></li>
</ul>
</nav>
<span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
</span>
<span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg>
</span>
</span>
</span>
</header>
<div class=content>
<main class=posts>
<div class=post-info>
<p>
</p>
</div>
<article>
<h1 class=post-title>
<a href=https://nicktehrany.github.io/notes/in4343-real-time-systems/content/scheduling-periodic-tasks/>Scheduling Periodic Tasks</a>
</h1>
<div class=post-content>
<h2 id=concepts>Concepts</h2>
<p>Again, tasks are defined with $\Gamma={T_1,T_2,&mldr;,T_n}$ and each task has a $C_I$ worst-case computation time, $T_i$ activation period, $D_i$ relative deadline, and $\Phi_i$ initial arrival time (phase).</p>
<h3 id=hyperperiod>Hyperperiod</h3>
<p>This depicts the minimum time period after which the schedule repeats. Therefore, it is the least common multiple of the periods of all the tasks.</p>
<h3 id=schedulability>Schedulability</h3>
<p>Feasibility is defined similar to aperiodic tasks, however each task is required to be able to be executed for its defined $C_i$ time in every interval $[a_{ik},d_{ik}],k=1,2,&mldr;$.</p>
<p>Then we can have schedulability tests that check if a scheduling policy is schedulable for the given tasks and constraints. However, some of these tests are required to show that it is <strong>certainly</strong> not schedulable, or other tests that show that it <strong>certainly</strong> is schedulable. Hence, some of these tests are exact and give a direct answer to if it is schedulable or not, however not all tests necessarily are.</p>
<p>For example, when testing if it is schedulabe for a single hyperperiod, is that enough to state that it is always schedulable?</p>
<h3 id=processor-utilization>Processor Utilization</h3>
<p>It is given as the fraction of processor time that is spent on a task,</p>
<p>$$U_i=\frac{C_i}{T_i}$$</p>
<p>Then the processor utilization is the sum over all task utilization.</p>
<p><img src=/images/IN4343/processor_utilization.png alt="Processor Utilization"></p>
<h2 id=proportional-share-algorithm>Proportional Share Algorithm</h2>
<p>With this algorithm time slots are of length that is the greatest common divisor (GCD) of all the tasks. Then each slot for a task is proportional to its utilization, meaning time slots are the utilization of the task ($\frac{C_I}{T_i}$) for the task multiplied by the calculated GCD. With $\delta$ being the GCD, we have time slot time being</p>
<p>$$\delta_i=U_i * \Delta$$</p>
<p>Then an algorithm is feasible if</p>
<p>$$\sum_i \delta_i \leq \Delta \text{ or } \sum_i U_i \leq 1$$</p>
<p>A drawback of this algorithm is that if $\Delta$ is small, there is a lot of context switching, hence possibly a lot of overheads introduced.</p>
<h2 id=work-and-sleep-algorithm>Work-and-Sleep Algorithm</h2>
<p>Here a task is running for $C_i$ units and suspends for $T_i - C_i$ units if another task with higher priority needs to be executed. This is very easy to implement, however, its drawback is that it can starve low priority tasks.</p>
<h2 id=timeline-cyclic-scheduling>Timeline (Cyclic) Scheduling</h2>
<p>The total time is divided into equal length slots, where we define a small cycle $\delta$ equal to he GCD, and a large cycle $T$ equal to the LCM (largest common multiple). Tasks are then placed into this smaller and larger periods, since we define the smallest period $\delta$ in which the most frequent task always needs to appear once, and apply the same for larger cycles. The schedule is then feasible if the sum of the computation times of the necessary tasks is less than or equal to $\delta$ (we only car about the required conditions, e.g. if task $A$ and $C$ never happen in a minor cycle together, we don&rsquo;t care if their sum is less than $\delta$).</p>
<p>Advantages are that it is easy to implement and schedules can be hard coded in the main loop, meaning tasks will have consistently low jitter. However, it cannot handle overloading and is sensitive to application changes.</p>
<h2 id=priority-scheduling>Priority Scheduling</h2>
<p>We assign priorities to the tasks based on their timing constraints (their deadline). There are different ways of assigning priority to a task given as,</p>
<ul>
<li><strong>Rate Monotonic (RM)</strong>: $P_i \frac{1}{T_i}$ for task $i$ and $T_i$ the period of the task. Hence, it is inversely proportional to the period, the larger the period, the lower its priority is.</li>
<li><strong>Deadline Monotonic (DM):</strong> $P_i \frac{1}{D_i}$ for task $i$ and $D_i$ the relative deadline of the task.</li>
<li><strong>Earliest Deadline First (EDF):</strong> $P_i \frac{1}{d_{ik}$ for task $i$ and $d_{ik}$ the absolute deadline of the task.</li>
</ul>
<h3 id=critical-instant>Critical Instant</h3>
<p>The critical instant of a task is the arrival time that induces the largest response time. It is essentially the worst case scenario when the task arrives concurrently with all higher priority tasks. If all tasks are schedulable in their critical instant, then the schedule is feasible.</p>
<h2 id=least-upper-bound-lub>Least Upper Bound (LUB)</h2>
<p>Given all possible task sets if we modify the computation times of the task, we find the upper bound of a task set (utilization that cannot get any higher, and which can be lower than 1 but never above 1), then one of these utilizations will give us a lower bound (lowers possible utilization). Then given a task set that has a utilization below this LUB we know that it is schedulable.</p>
<h3 id=rm-algorithm>RM Algorithm</h3>
<p>Since we don&rsquo;t want to do the calculation for finding the LUB for all scheduling algorithms and all possible task combinations, we have an algorithm to analytically quantify the LUB. Given any task set, for scheduling the LUB with RM</p>
<p>$$U_{lub}^{RM}=n(2^{\frac{1}{n}}-1), n\rightarrow \infty \implies \text{ln}2=0.69$$</p>
<h3 id=rm-test-with-hypberbolic-bound-hb>RM Test with Hypberbolic Bound (HB)</h3>
<p>It says that given a task set $\Gamma$ of $n$ periodic tasks, and each task has processor utilization $\tau_i$ it is schedulable with RM if</p>
<p>$$\prod_{i=1}^{n}(U_i+1)\leq 2$$</p>
<h3 id=comparison>Comparison</h3>
<p>HB gives a tighter bound than LL.</p>
<p><img src=/images/IN4343/RM.png alt="LL compared to HB"></p>
<h2 id=deadline-monotonic-dm>Deadline Monotonic (DM)</h2>
<p>Unlike the Rate Monotonic, where the relative deadline is the same as the period, now the relative deadline is before the end of the period. Similarly, with RM we execute the task with the shortest relative deadline first. Hence, it is also a preemptive algorithm.</p>
<h3 id=response-time-analysis>Response Time Analysis</h3>
<p>Since the approach for measuring utilization (with the formula from RM that sums the utilization of tasks) is too pessimistic to show if a task set is schedulable under DM, we need to use the response time analysis that focuses on the critical instances of tasks (as this shows the worst case scenario). We assume that the task indexes are ordered in increasing relative deadline order, then we can compute th longest response time with $T_i=C_i + I_i$ with $C_i$ computation time and $I_i$ being the interference from higher priority tasks. We then show that it is schedulable by $R_i \leq D_i$.</p>
<h4 id=computing-interference>Computing Interference</h4>
<p>We compute the worst case response time (WCRT) with interference of task $T_k$ on $T_i$ in the interval from $[0,R_i]$ as</p>
<p>$$I_{ik}=\lceil \frac{R_i}{T_k}\rceil C_k$$</p>
<p>Similarly, we do this for all higher priority tasks as</p>
<p>$$I_i=\sum_{k=1}^{i-1}\lceil \frac{R_i}{T_k}\rceil C_k$$</p>
<p>However, this requires the response time ($R_i$) which was to goal to be calculated (we need the interference to calculate the response time but also the response time to calculate the interference). To solve this we make assumptions on the value of the response (since it&rsquo;s on both sides of the equation), calculate the interference based on it, and change the assumption until we reached a fixed point (reach convergence).</p>
<p><img src=/images/IN4343/WCRT_Example.png alt="WCRT Example"></p>
<h2 id=dynamic-scheduling-policies>Dynamic Scheduling Policies</h2>
<p>Instead a constant priority assignment for each task, we now assign priorities to each job on its release using EDF.</p>
<script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']],displayMath:[['$$','$$'],['\\[','\\]']],processEscapes:!0,processEnvironments:!0},options:{skipHtmlTags:['script','noscript','style','textarea','pre']}},window.addEventListener('load',a=>{document.querySelectorAll("mjx-container").forEach(function(a){a.parentElement.classList+='has-jax'})})</script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script>
</div>
</article>
<hr>
<div class=post-info>
<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>
1103 Words
</p>
<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
2022-02-22
</p>
</div>
<div class=pagination>
<div class=pagination__title>
<span class=pagination__title-h>Read other posts</span>
<hr>
</div>
<div class=pagination__buttons>
<span class="button previous">
<a href=https://nicktehrany.github.io/notes/in4343-real-time-systems/content/fixed-priority-servers/>
<span class=button__icon>←</span>
<span class=button__text>Fixed Priority Servers</span>
</a>
</span>
<span class="button next">
<a href=https://nicktehrany.github.io/notes/in4343-real-time-systems/content/scheduling-aperiodic-tasks/>
<span class=button__text>Scheduling Aperiodic Tasks</span>
<span class=button__icon>→</span>
</a>
</span>
</div>
</div>
</main>
</div>
<footer class=footer>
<link rel=stylesheet href=https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css>
<div>
<div>
&nbsp; <a href=https://github.com/nicktehrany target=_blank rel=noopener title=Github><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a> &nbsp;&nbsp; <a href=https://www.linkedin.com/in/nicktehrany/ target=_blank rel=noopener title=Linkedin><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></a> &nbsp;
<a href=/misc/cv.pdf target=_self><i class="ai ai-cv ai-2x"></i></a>
<a href=https://www.semanticscholar.org/author/Tehrany/2105151990 target=_self><i class="ai ai-semantic-scholar ai-2x"></i></a>
</div>
</div>
<div class=footer__inner>
<div class=footer__content>
<span>Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>Themed by <a href=https://github.com/rhazdon/hugo-theme-hello-friend-ng>Hello Friend NG</a></span>
</div>
</div>
</footer>
</div>
<script type=text/javascript src=/bundle.min.e9f93b80e78a22e6f04cbb5f73e0f9c4ba60ff73a2a0ef85965c688f93dd1f2722a282e30e485603e4c65b1b346720e35f213435ec5556e196a97a68d097c80f.js integrity="sha512-6fk7gOeKIubwTLtfc+D5xLpg/3OioO+Fllxoj5PdHyciooLjDkhWA+TGWxs0ZyDjXyE0NexVVuGWqXpo0JfIDw=="></script>
</body>
</html>